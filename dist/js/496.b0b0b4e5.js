"use strict";(self["webpackChunkapp_show"]=self["webpackChunkapp_show"]||[]).push([[496],{5496:function(t,e,d){d.r(e),d.d(e,{default:function(){return y}});var a=d(6768),i=d(4232),l=d(5130);const c={class:"container"},s={class:"table table-bordered"},r=["src"],u=["onClick"],n=["onClick"],o={key:0,class:"popup-overlay"},p={class:"popup"},h={class:"mb-4"},m=["required"],k={key:0,class:"mb-3"},P=["src"],b={type:"submit",class:"btn-submit w-100 mb-2"};function g(t,e,d,g,L,v){return(0,a.uX)(),(0,a.CE)("div",c,[e[8]||(e[8]=(0,a.Lk)("h2",{class:"text-center mb-4"},"เพิ่มข้อมูลสินค้า",-1)),(0,a.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>v.showAddForm&&v.showAddForm(...t)),class:"btn-submit mb-4"},"Add Product"),(0,a.Lk)("table",s,[e[7]||(e[7]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"Name"),(0,a.Lk)("th",null,"Price"),(0,a.Lk)("th",null,"Details"),(0,a.Lk)("th",null,"Image"),(0,a.Lk)("th",null,"Actions")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(L.products,(t=>((0,a.uX)(),(0,a.CE)("tr",{key:t.id},[(0,a.Lk)("td",null,(0,i.v_)(t.id),1),(0,a.Lk)("td",null,(0,i.v_)(t.name),1),(0,a.Lk)("td",null,(0,i.v_)(t.price),1),(0,a.Lk)("td",null,(0,i.v_)(t.details),1),(0,a.Lk)("td",null,[(0,a.Lk)("img",{src:"http://localhost:226/app-show/php-vue/product_crud/"+t.image,width:"100"},null,8,r)]),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:e=>v.editProduct(t),class:"btn btn-warning btn-sm"},"Edit",8,u),(0,a.Lk)("button",{onClick:e=>v.confirmDelete(t.id),class:"btn btn-danger btn-sm"},"Delete",8,n)])])))),128))])]),L.editing||L.adding?((0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",p,[(0,a.Lk)("h3",h,(0,i.v_)(L.adding?"Add Product":"Edit Product"),1),(0,a.Lk)("form",{onSubmit:e[6]||(e[6]=(0,l.D$)(((...t)=>v.saveProduct&&v.saveProduct(...t)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>L.editProductData.name=t),placeholder:"Product Name",required:"",class:"input-style mb-3"},null,512),[[l.Jo,L.editProductData.name]]),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=t=>L.editProductData.price=t),placeholder:"Price",required:"",class:"input-style mb-3"},null,512),[[l.Jo,L.editProductData.price]]),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>L.editProductData.details=t),placeholder:"Product Details",required:"",class:"input-style mb-3"},null,512),[[l.Jo,L.editProductData.details]]),(0,a.Lk)("input",{type:"file",onChange:e[4]||(e[4]=(...t)=>v.handleFileChange&&v.handleFileChange(...t)),ref:"fileInput",required:L.adding,class:"input-style mb-3"},null,40,m),L.editProductData.imagePreview?((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("img",{src:L.editProductData.imagePreview,width:"100",class:"img-thumbnail"},null,8,P)])):(0,a.Q3)("",!0),(0,a.Lk)("button",b,(0,i.v_)(L.adding?"Add":"Update"),1),(0,a.Lk)("button",{type:"button",onClick:e[5]||(e[5]=(...t)=>v.cancelEdit&&v.cancelEdit(...t)),class:"btn btn-secondary w-100"},"Cancel")],32)])])):(0,a.Q3)("",!0)])}d(4603),d(7566),d(8721);var L=d(4373),v={data(){return{products:[],editing:!1,adding:!1,editProductData:{id:null,name:"",price:"",details:"",image:"",imagePreview:""},selectedFile:null}},mounted(){this.fetchProducts()},methods:{async fetchProducts(){try{const t=await L.A.get("http://localhost:226/app-show/php-vue/product_crud/get_products.php");this.products=t.data}catch(t){alert("Error fetching products")}},showAddForm(){this.adding=!0,this.resetForm()},editProduct(t){this.editProductData={...t,imagePreview:t.image?"http://localhost:226/app-show/php-vue/product_crud/"+t.image:null},this.editing=!0},handleFileChange(t){this.selectedFile=t.target.files[0]},async saveProduct(){const t=new FormData;t.append("action",this.adding?"create":"update"),t.append("id",this.editProductData.id),t.append("name",this.editProductData.name),t.append("price",this.editProductData.price),t.append("details",this.editProductData.details),this.selectedFile&&t.append("image",this.selectedFile);try{await L.A.post("http://localhost:226/app-show/php-vue/product_crud/upload.php",t),this.fetchProducts(),alert(this.adding?"Product added successfully!":"Product updated successfully!"),this.cancelEdit()}catch(e){alert("Error saving product")}},confirmDelete(t){window.confirm("Are you sure you want to delete this product?")&&this.deleteProduct(t)},async deleteProduct(t){try{await L.A.post("http://localhost:226/app-show/php-vue/product_crud/upload.php",new URLSearchParams({action:"delete",id:t})),this.fetchProducts(),alert("Product deleted successfully!")}catch(e){alert("Error deleting product")}},cancelEdit(){this.editing=!1,this.adding=!1,this.resetForm()},resetForm(){this.editProductData={id:null,name:"",price:"",details:"",image:"",imagePreview:""},this.selectedFile=null,this.$refs.fileInput&&(this.$refs.fileInput.value="")}}},w=d(1241);const f=(0,w.A)(v,[["render",g],["__scopeId","data-v-4c24e14a"]]);var y=f}}]);
//# sourceMappingURL=496.b0b0b4e5.js.map